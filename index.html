<!DOCTYPE html>
<html class="sl-theme-dark" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="My website description" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>My website</title>

    <link rel="apple-touch-icon" href="/assets/static/icon.png" />
    <link rel="icon" type="image/png" href="/assets/static/icon.png" />
    <link
      rel="stylesheet"
      href="/assets/vendor/shoelace/dist/themes/light.css"
    />
    <link
      rel="stylesheet"
      href="/assets/vendor/shoelace/dist/themes/dark.css"
    />
    <link rel="stylesheet" href="./assets/css/main.css" />

    <script purpose="light-switch">
      switch(localStorage.getItem('preferred-theme')) {
        case 'dark':
          document.documentElement.classList.add('sl-theme-dark');
          break;
        case 'light':
          break;
        default:
          window.matchMedia("(prefers-color-scheme: dark)").matches && document.documentElement.classList.add('sl-theme-dark');
      }
    </script>
  </head>

  <body>
    <header>
      <star-sheet></star-sheet>
      <h1><a href="/" aria-label="Willson"><colorize-word>Willson</colorize-word></a></h1>
      <nav>
        <div class="social">
          <sl-dropdown>
            <sl-button slot="trigger" pill size="small" caret>
              <sl-icon name="moon" label="Select theme"></sl-icon>
            </sl-button>
            <sl-menu value="automatic">
              <sl-menu-item value="light">Light</sl-menu-item>
              <sl-menu-item value="dark">Dark</sl-menu-item>
              <sl-menu-item value="automatic">Automatic</sl-menu-item>
            </sl-menu>
          </sl-dropdown>
        <sl-tooltip content="Twitter">
          <sl-icon-button
            name="twitter"
            label="Twitter"
            href="https://twitter.com/modfox"
            target="_blank"
          ></sl-icon-button>
        </sl-tooltip>
        <sl-tooltip content="GitHub">
          <sl-icon-button
            name="github"
            label="GitHub"
            href="https://github.com/willsonsmith/willsonsmith.com"
            target="_blank"
          ></sl-icon-button>
        </sl-tooltip>
      </nav>
    </header>
    <main>
      Hello
    </main>

    <script type="module" src="./assets/js/(._.).js"></script>
    <script purpose="light-switch">
      const menu = document.querySelector("sl-menu");
      menu.addEventListener('sl-select', (event) => {
        const theme = event.detail.item.value;
        localStorage.setItem('preferred-theme', theme);
        let dark;
        switch(theme) {
          case 'light': dark = false; break;
          case 'dark': dark = true; break;
          default: dark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        }
        document.documentElement.classList.toggle('sl-theme-dark', dark);
      });
    </script>

    <!-- Add a Service Worker -->
    <!-- <script type="text/javascript">
      navigator.serviceWorker
        .register('/service-worker.js')
        .then((registration) => {
          console.log('Service worker registered.', registration);
        })
        .catch((error) => {
          console.log('Service worker registration failed.', error);
        });
    </script> -->
  </body>
</html>
